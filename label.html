<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Data Collection Web Application" />
    <meta name="author" content="Aleyna Kutuk" />
    <title>Scene Sketch Data Collector</title>
    <link rel="stylesheet" href="style.css" />

  </head>

  <body>
      <!-- The core Firebase JS SDK is always required and must be listed first -->
      <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-analytics.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-database.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-storage.js"></script>
  
 
    <div class="row">
      <div class="column-left">
        <div style="height: 30px;"></div>

        <div style="justify-content: center; display: block; ">
          <div id="dropdown_wrapper" style="display: block; justify-content: center;">
            <input style= "font-family: 'QuickDraw';" type="text" id="categoryname" placeholder="Search...">
            <div id="dropdown" style="justify-content: center; align-items: center; "></div>
            <button id="submitBtn" class = "btn" style="width: 110px; height: 30px; font-size: 15px; margin-top: 4px; justify-content: center;" onclick="saveCategory()">Submit</button>
          </div>
        </div>


      </div>

      <div class="column-middle" ">
        <div class="flexcontainer" style="height: 50px; text-align: center; justify-content: center; display: flex; align-items: center; font-size: 20px;">Please label every object in the scene!</div>
        <div id="canvas-wrapper" style="width: device-width; height: 575px; position: relative; user-select: none; background-color: white;" style="display:block">
          <canvas id="canvas"
            >Your browser does not support canvas. Please upgrade it!</canvas>
        </div>
        

        <div id="element-container" style="width: device-width; height: 450px;">
            <div style="justify-content: right; display: flex; margin-left: auto; margin-right: 0;">
            <button href="#" type="button" class="btn" id="conclusionButton"
                style="width: 110px; height: 30px; font-size: 15px;font-family: 'QuickDraw';" onclick="nextSketch()">Next</button>
            </div>
        </div>
      </div>

      <div class="column-right">
        <p style="margin-top: 300px;"> If you cannot find an appropriate label, add a new label!</p>
        <input style= "font-family: 'QuickDraw';   max-width: 100px;
        margin-bottom: 0px; 
        background-color: #ffffff;
        font-size: 12px;
        position: relative;
        width: auto;
        color: rgb(0, 0, 0);
        text-decoration: none;
        border-radius: 5px;
        border: solid 1px #a091ff;
        text-align: center;
        padding: 8px 8px 7px;
        margin: 12px;
        text-transform: uppercase;
        font-weight: bold; " type="text" id="labelname" placeholder="NEW LABEL">
        <button id="labelBtn" class = "btn" style="width: 110px; height: 30px; font-size: 15px; margin-top: 4px; justify-content: center;" onclick="saveOther() ">LABEL</button> 
      </div>
    </div>
    
    </script>
    <script>

        const obj_classes = [
          "The Eiffel Tower",
          "The Great Wall of China",
          "The Mona Lisa",
          "aircraft carrier",
          "airplane",
          "alarm clock",
          "ambulance",
          "angel",
          "animal migration",
          "ant",
          "anvil",
          "apple",
          "arm",
          "asparagus",
          "axe",
          "backpack",
          "banana",
          "bandage",
          "barn",
          "baseball",
          "baseball bat",
          "basket",
          "basketball",
          "bat",
          "bathtub",
          "beach",
          "bear",
          "beard",
          "bed",
          "bee",
          "belt",
          "bench",
          "bicycle",
          "binoculars",
          "bird",
          "birthday cake",
          "blackberry",
          "blueberry",
          "book",
          "boomerang",
          "bottlecap",
          "bowtie",
          "bracelet",
          "brain",
          "bread",
          "bridge",
          "broccoli",
          "broom",
          "bucket",
          "bulldozer",
          "bus",
          "bush",
          "butterfly",
          "cactus",
          "cake",
          "calculator",
          "calendar",
          "camel",
          "camera",
          "camouflage",
          "campfire",
          "candle",
          "cannon",
          "canoe",
          "car",
          "carrot",
          "castle",
          "cat",
          "ceiling fan",
          "cell phone",
          "cello",
          "chair",
          "chandelier",
          "church",
          "circle",
          "clarinet",
          "clock",
          "cloud",
          "coffee cup",
          "compass",
          "computer",
          "cookie",
          "cooler",
          "couch",
          "cow",
          "crab",
          "crayon",
          "crocodile",
          "crown",
          "cruise ship",
          "cup",
          "diamond",
          "dishwasher",
          "diving board",
          "dog",
          "dolphin",
          "donut",
          "door",
          "dragon",
          "dresser",
          "drill",
          "drums",
          "duck",
          "dumbbell",
          "ear",
          "elbow",
          "elephant",
          "envelope",
          "eraser",
          "eye",
          "eyeglasses",
          "face",
          "fan",
          "feather",
          "fence",
          "finger",
          "fire hydrant",
          "fireplace",
          "firetruck",
          "fish",
          "flamingo",
          "flashlight",
          "flip flops",
          "floor lamp",
          "flower",
          "flying saucer",
          "foot",
          "fork",
          "frog",
          "frying pan",
          "garden",
          "garden hose",
          "giraffe",
          "goatee",
          "golf club",
          "grapes",
          "grass",
          "guitar",
          "hamburger",
          "hammer",
          "hand",
          "harp",
          "hat",
          "headphones",
          "hedgehog",
          "helicopter",
          "helmet",
          "hexagon",
          "hockey puck",
          "hockey stick",
          "horse",
          "hospital",
          "hot air balloon",
          "hot dog",
          "hot tub",
          "hourglass",
          "house",
          "house plant",
          "hurricane",
          "ice cream",
          "jacket",
          "jail",
          "kangaroo",
          "key",
          "keyboard",
          "knee",
          "knife",
          "ladder",
          "lantern",
          "laptop",
          "leaf",
          "leg",
          "light bulb",
          "lighter",
          "lighthouse",
          "lightning",
          "line",
          "lion",
          "lipstick",
          "lobster",
          "lollipop",
          "mailbox",
          "map",
          "marker",
          "matches",
          "megaphone",
          "mermaid",
          "microphone",
          "microwave",
          "monkey",
          "moon",
          "mosquito",
          "motorbike",
          "mountain",
          "mouse",
          "moustache",
          "mouth",
          "mug",
          "mushroom",
          "nail",
          "necklace",
          "nose",
          "ocean",
          "octagon",
          "octopus",
          "onion",
          "oven",
          "owl",
          "paint can",
          "paintbrush",
          "palm tree",
          "panda",
          "pants",
          "paper clip",
          "parachute",
          "parrot",
          "passport",
          "peanut",
          "pear",
          "peas",
          "pencil",
          "penguin",
          "piano",
          "pickup truck",
          "picture frame",
          "pig",
          "pillow",
          "pineapple",
          "pizza",
          "pliers",
          "police car",
          "pond",
          "pool",
          "popsicle",
          "postcard",
          "potato",
          "power outlet",
          "purse",
          "rabbit",
          "raccoon",
          "radio",
          "rain",
          "rainbow",
          "rake",
          "remote control",
          "rhinoceros",
          "rifle",
          "river",
          "roller coaster",
          "rollerskates",
          "sailboat",
          "sandwich",
          "saw",
          "saxophone",
          "school bus",
          "scissors",
          "scorpion",
          "screwdriver",
          "sea turtle",
          "see saw",
          "shark",
          "sheep",
          "shoe",
          "shorts",
          "shovel",
          "sink",
          "skateboard",
          "skull",
          "skyscraper",
          "sleeping bag",
          "smiley face",
          "snail",
          "snake",
          "snorkel",
          "snowflake",
          "snowman",
          "soccer ball",
          "sock",
          "speedboat",
          "spider",
          "spoon",
          "spreadsheet",
          "square",
          "squiggle",
          "squirrel",
          "stairs",
          "star",
          "steak",
          "stereo",
          "stethoscope",
          "stitches",
          "stop sign",
          "stove",
          "strawberry",
          "streetlight",
          "string bean",
          "submarine",
          "suitcase",
          "sun",
          "swan",
          "sweater",
          "swing set",
          "sword",
          "syringe",
          "t-shirt",
          "table",
          "teapot",
          "teddy-bear",
          "telephone",
          "television",
          "tennis racquet",
          "tent",
          "tiger",
          "toaster",
          "toe",
          "toilet",
          "tooth",
          "toothbrush",
          "toothpaste",
          "tornado",
          "tractor",
          "traffic light",
          "train",
          "tree",
          "triangle",
          "trombone",
          "truck",
          "trumpet",
          "umbrella",
          "underwear",
          "van",
          "vase",
          "violin",
          "washing machine",
          "watermelon",
          "waterslide",
          "whale",
          "wheel",
          "windmill",
          "wine bottle",
          "wine glass",
          "wristwatch",
          "yoga",
          "zebra",
          "zigzag"
        ];

        function filterDropDown(dropdown, input, dropdown_wrapper, items) {
            //create dropdown items from list of items
            for (let i=0; i<items.length; i++) {
            let dropdown_item = document.createElement('a');
            dropdown_item.setAttribute('href', '#'+items[i]);
            dropdown_item.setAttribute('class', 'dropdown-item');
            dropdown_item.innerHTML = items[i];
            dropdown_item.addEventListener('click', function () {
              input.value = dropdown_item.innerHTML;
            });
            dropdown.appendChild(dropdown_item);
          }

          input.addEventListener('input', function () {
            let dropdown_items = dropdown.querySelectorAll('.dropdown-item');

            if (!dropdown_items){ return false; } 

            for (let i=0; i<dropdown_items.length; i++) {
              if (dropdown_items[i].innerHTML.toUpperCase().includes(input.value.toUpperCase()))
                  dropdown_items[i].style.display = 'block';
              else
                  dropdown_items[i].style.display = 'none';
            }
          });
        }

        filterDropDown(
        document.getElementById('dropdown'),
        document.getElementById('categoryname'),
        document.getElementById('dropdown_wrapper'),
        obj_classes
        )

        document.addEventListener("keydown", function(event) {
         if (event.key == "ArrowLeft"){
            moveSceneBackward();
         } else if (event.key == "ArrowRight"){
            moveSceneForward();
         }
        });

    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.2.4/fabric.min.js"></script>
    <script src="label_keyboard_version.js"></script>

  </body>
</html>