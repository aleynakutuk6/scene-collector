<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Data Collection Web Application" />
    <meta name="author" content="Aleyna Kutuk" />
    <title>Scene Sketch Data Collector</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet"/>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-storage.js"></script>

    <div class="row">
      <div class="column-left"></div>

      <div class="column-middle">
        <h1 class="heading">
          Select the scene descriptions txt file now!!
        </h1>
          <p>DO NOT click to NEXT button!! PLEASE WAIT FOR THE SETUP!!</p>
        <div id="element-container">
            <a> Scene descriptions:  </a> <br>
            <input type="file" name="inputFileToRead" id="inputFileToRead"/> <br>
            <a> Object classes:  </a> <br>
            <div style="justify-content: left; display: flex;">
            
            <input type="file" name="classesFile" id="classesFile"/>
            <div class="button-container" style="display: flex; justify-content: right; margin-left: auto; margin-right: 0;">
              <button id="submitBtn" class="btn" style="width: 80px; height: 30px; font-size: 15px;">NEXT</button>
            </div>
          </div>
        </div>
      </div>

      <div class="column-right"></div>
    </div>

    <script>
      localStorage.setItem("scene_descriptions", null);

      document
        .getElementById("submitBtn")
        .addEventListener("click", function () {
          window.location.href = "drawing_info.html";
        });

      document.getElementById("inputFileToRead")
      .addEventListener("change", function () {
        var fr = new FileReader();
        fr.readAsText(this.files[0]);
        fr.onload = function () {
          localStorage.setItem("scene_descriptions", fr.result);
        };  
      });

      document.getElementById("classesFile")
      .addEventListener("change", function () {
        var fr = new FileReader();
        fr.readAsText(this.files[0]);
        fr.onload = function () {
          localStorage.setItem("obj_classes", fr.result);
        };  
      });

    </script>
  </body>
</html>
